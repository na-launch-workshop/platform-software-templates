apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: workshop-orchestrator
spec:
  generators:
    - list:
        elements:
          - application: workshop-rollout-controller
            namespace: openshift-gitops
            project: controllers
            wave: "-2"
            source: |
              chart: rollout-controller
                # Update targetRevision to match the latest chart version: https://github.com/na-launch-workshop/platform-charts/blob/main/charts/rollout-controller/Chart.yaml
              targetRevision: "1.0.0"
              repoURL: https://na-launch-workshop.github.io/platform-charts
              helm:
                values: |
                  controller:
                    name: workshop
                  cluster:
                    domain: ${{ values.cluster.domains.local }}
                    type: ${{ values.cluster.type }}
                  # Reference list of available charts: https://github.com/na-launch-workshop/platform-charts/tree/main/charts
                  # The default enabled charts in values.yaml: https://github.com/na-launch-workshop/platform-charts/blob/main/charts/rollout-controller/values.yaml
                  devspaces:
                    enabled: true
                    enableCapacity: ${{ values.devspaces.enableCapacity }}
                    count: ${{ values.devspaces.count }}
                    sku: ${{ values.devspaces.sku }}
                  amq:
                    enabled: true
                    enableCapacity: ${{ values.amq.enableCapacity }}
                    count: ${{ values.amq.count }}
                    sku: ${{ values.amq.sku }}
                  opentelemetry:
                    enabled: true
                  minio:
                    enabled: true
                  serverless: 
                    enabled: true
